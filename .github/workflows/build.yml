name: Windows MSVC (/MD)

on:
  push:
  pull_request:

jobs:
  build:
    runs-on: windows-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        submodules: recursive

    - name: Configure (MSVC, x64, /MD)
      run: >
        cmake -S . -B build
        -G "Visual Studio 17 2022"
        -A x64
        -DCMAKE_BUILD_TYPE=Release

    - name: Build (Release)
      run: cmake --build build --config Release

    - name: Verify CRT
      run: |
        dumpbin /directives build/**/draco.lib || echo "no draco.lib yet"

